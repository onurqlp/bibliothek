<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AYDA Â· Online KÃ¼tÃ¼phane</title>
  <meta name="color-scheme" content="light" />
  <meta name="theme-color" content="#234078" />
  <style>
    :root{
      --ayda:#234078;--ayda-soft:#2f4f91;--bg:#f4f6fb;--ink:#141824;--muted:#6b7280;--card:#ffffff;--border:rgba(0,0,0,.05);
      --radius-full:999px;--shadow-lg:0 18px 45px rgba(0,0,0,.08);--shadow-soft:0 10px 25px rgba(0,0,0,.05);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);
      background:radial-gradient(circle at top left,#fdfcff 0,#edf2ff 26%,#e4ecff 60%,#dde6ff 100%);min-height:100vh}
    body{display:flex;align-items:center;justify-content:center;padding:16px}
    .wrap{width:100%;max-width:1200px;background:linear-gradient(135deg,rgba(255,255,255,.94),rgba(244,246,252,.98));
      box-shadow:var(--shadow-lg);border-radius:26px;padding:24px 22px 22px;border:1px solid rgba(255,255,255,.6);backdrop-filter:blur(20px)}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:0 4px 12px;border-bottom:1px solid rgba(35,64,120,.08);margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand-logo{width:38px;height:38px;border-radius:14px;background:conic-gradient(from 210deg,var(--ayda),#3b82f6,#22c55e,var(--ayda));
      display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px;box-shadow:0 10px 25px rgba(35,64,120,.45)}
    .brand-text-title{font-size:18px;font-weight:700;letter-spacing:.02em}
    .brand-text-sub{font-size:12px;color:var(--muted)}
    .pill{font-size:11px;padding:5px 10px;border-radius:var(--radius-full);background:rgba(35,64,120,.06);color:var(--ayda);
      display:inline-flex;align-items:center;gap:6px;white-space:nowrap}
    .pill-dot{width:8px;height:8px;border-radius:50%;background:#22c55e;box-shadow:0 0 0 4px rgba(34,197,94,.25)}

    /* GiriÅŸ kartÄ± */
    .gate{display:grid;grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);gap:22px;padding:20px 18px 18px;border-radius:22px;
      background:radial-gradient(circle at top left,rgba(35,64,120,.1),transparent 55%),linear-gradient(135deg,#ffffff,rgba(255,255,255,.65));
      box-shadow:var(--shadow-soft)}
    .gate-main-title{font-size:20px;font-weight:700;margin-bottom:4px}
    .gate-main-sub{font-size:13px;color:var(--muted);max-width:360px}
    .code-form{margin-top:16px;display:flex;flex-wrap:wrap;gap:10px;align-items:stretch}
    .field{flex:1 1 180px}
    .field-label{font-size:11px;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:4px}
    .code-input{width:100%;padding:10px 12px;border-radius:var(--radius-full);border:1px solid rgba(15,23,42,.09);background:rgba(255,255,255,.95);
      font-size:14px;outline:none;transition:border .18s ease,box-shadow .18s ease,background .18s ease}
    .code-input:focus{border-color:rgba(35,64,120,.6);box-shadow:0 0 0 1px rgba(35,64,120,.4),0 0 0 6px rgba(35,64,120,.08);background:#fff}
    .btn-primary{padding:11px 18px;border-radius:var(--radius-full);border:none;background:linear-gradient(135deg,var(--ayda),var(--ayda-soft));color:#fff;
      font-size:14px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 14px 30px rgba(35,64,120,.45);white-space:nowrap;
      transition:transform .12s ease,box-shadow .12s ease,background .12s ease}
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 18px 38px rgba(35,64,120,.55)}
    .btn-primary:active{transform:translateY(1px) scale(.98);box-shadow:0 8px 20px rgba(35,64,120,.45)}
    .btn-icon{font-size:16px}
    .gate-hint{margin-top:10px;font-size:11px;color:var(--muted);display:flex;align-items:center;gap:6px}
    .gate-hint-badge{padding:3px 8px;border-radius:var(--radius-full);background:rgba(15,23,42,.04);font-size:10px;font-weight:500;text-transform:uppercase}
    .gate-right{border-radius:18px;border:1px dashed rgba(35,64,120,.22);padding:12px 12px 10px;background:linear-gradient(135deg,rgba(35,64,120,.08),rgba(35,64,120,.02))}
    .mini-row{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:#e5edff;margin-bottom:6px}
    .mini-label{text-transform:uppercase;letter-spacing:.12em;font-size:10px;opacity:.8}
    .mini-class{font-weight:600}
    .mini-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
    .chip{font-size:11px;padding:5px 10px;border-radius:var(--radius-full);background:rgba(15,23,42,.24);color:#e5edff;display:inline-flex;align-items:center;gap:6px}
    .chip-dot{width:7px;height:7px;border-radius:50%;background:#4ade80}
    .mini-footer{margin-top:10px;font-size:11px;color:#dbe4ff;opacity:.8}

    /* KÃ¼tÃ¼phane layer */
    .library{margin-top:18px;display:none;animation:fadeIn .2s ease-out forwards}
    .library-inner{display:grid;grid-template-columns:minmax(0,270px) minmax(0,1fr);gap:18px}
    .panel{background:rgba(255,255,255,.96);border-radius:18px;padding:14px 14px 12px;border:1px solid var(--border);box-shadow:var(--shadow-soft)}
    .panel-title{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:.14em;color:var(--muted);margin-bottom:6px}
    .badge-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:4px}
    .badge-soft{font-size:11px;padding:4px 10px;border-radius:var(--radius-full);background:rgba(35,64,120,.06);color:var(--ayda)}
    .section-label{font-size:11px;text-transform:uppercase;letter-spacing:.16em;color:var(--muted);margin:8px 0 6px}
    .btn-grid{display:flex;flex-wrap:wrap;gap:8px}
    .tab-btn,.view-btn,.filter-chip,.ghost-btn{border-radius:var(--radius-full);border:1px solid rgba(148,163,184,.6);padding:6px 12px;font-size:12px;background:#fff;color:#0f172a;
      cursor:pointer;display:inline-flex;align-items:center;gap:6px;transition:background .16s ease,color .16s ease,box-shadow .16s ease,border-color .16s ease,transform .1s ease}
    .tab-btn .emoji,.view-btn .emoji,.filter-chip .emoji{font-size:14px}
    .tab-btn.active,.view-btn.active{background:linear-gradient(135deg,var(--ayda),var(--ayda-soft));color:#fff;border-color:transparent;box-shadow:0 12px 25px rgba(35,64,120,.55);transform:translateY(-1px)}
    .filter-chip.active{background:rgba(35,64,120,.1);border-color:var(--ayda);color:var(--ayda)}
    .tab-btn:hover:not(.active),.view-btn:hover:not(.active),.filter-chip:hover:not(.active),.ghost-btn:hover{background:rgba(148,163,184,.08)}
    .panel-note{margin-top:10px;font-size:11px;color:var(--muted)}
    .panel-note strong{color:var(--ayda)}

    /* Viewer */
    .viewer-panel{display:flex;flex-direction:column;min-height:440px}
    .viewer-header{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;margin-bottom:6px}
    .viewer-title{font-size:15px;font-weight:600}
    .viewer-meta{font-size:11px;color:var(--muted);margin-top:2px}
    .viewer-status{font-size:11px;padding:4px 9px;border-radius:var(--radius-full);background:rgba(34,197,94,.08);color:#15803d;display:inline-flex;align-items:center;gap:6px;white-space:nowrap}
    .viewer-status-dot{width:7px;height:7px;border-radius:50%;background:#22c55e}

    /* Arama */
    .search-row{margin:6px 0 4px;display:flex;align-items:center;gap:8px}
    .search-input{flex:1;padding:7px 10px;border-radius:var(--radius-full);border:1px solid rgba(148,163,184,.7);font-size:11px;outline:none;background:#f9fafb;
      transition:border .16s ease,box-shadow .16s ease,background .16s ease}
    .search-input:focus{background:#fff;border-color:rgba(35,64,120,.7);box-shadow:0 0 0 1px rgba(35,64,120,.45),0 0 0 5px rgba(35,64,120,.08)}
    .search-icon{font-size:14px;opacity:.6}

    /* Son aÃ§Ä±lanlar */
    .recent-row{margin:4px 0 6px;font-size:11px;color:var(--muted)}
    .recent-title{text-transform:uppercase;letter-spacing:.14em;font-size:10px;margin-bottom:3px}
    .recent-chips{display:flex;flex-wrap:wrap;gap:4px}
    .recent-chip{border-radius:var(--radius-full);border:1px dashed rgba(148,163,184,.6);padding:3px 8px;font-size:10px;background:#f9fafb;color:#0f172a;cursor:pointer;
      max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

    .resource-chips{margin:8px 0 10px;display:flex;flex-wrap:wrap;gap:6px}
    .resource-chip{border-radius:var(--radius-full);border:1px solid rgba(148,163,184,.6);padding:4px 10px;font-size:11px;background:#fff;color:#0f172a;cursor:pointer;white-space:nowrap}
    .resource-chip.active{background:rgba(35,64,120,.08);border-color:var(--ayda);color:var(--ayda)}

    /* Iframe */
    .iframe-shell{flex:1;border-radius:16px;overflow:hidden;border:1px solid rgba(148,163,184,.45);
      background:repeating-linear-gradient(45deg,rgba(148,163,184,.12),rgba(148,163,184,.12) 10px,rgba(226,232,240,.6) 10px,rgba(226,232,240,.6) 20px);
      position:relative;min-height:340px;margin-top:4px}
    iframe{width:100%;height:100%;border:none;background:#fff}
    .hint-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;padding:18px}
    .hint-box{max-width:360px;background:rgba(15,23,42,.9);color:#e5e7eb;border-radius:16px;padding:14px 16px;font-size:12px;box-shadow:0 18px 45px rgba(15,23,42,.7)}
    .hint-box strong{color:#f9fafb}
    .hint-box small{display:block;margin-top:4px;font-size:11px;color:#9ca3af}

    .hidden{display:none !important}
    .error-text{margin-top:6px;font-size:11px;color:#b91c1c}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    /* Collapsible (filtre paneli) */
    .collapsible{display:grid;grid-template-rows:0fr;opacity:.0;overflow:hidden;transition:grid-template-rows .25s ease,opacity .25s ease}
    .collapsible.open{grid-template-rows:1fr;opacity:1}
    .collapsible-inner{min-height:0}

    .filter-actions{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .btn-apply{background:linear-gradient(135deg,var(--ayda),var(--ayda-soft));color:#fff;border:none}
    .btn-clear{background:#fff;color:#0f172a;border:1px solid rgba(148,163,184,.6)}
    .btn-apply,.btn-clear{padding:7px 12px;border-radius:var(--radius-full);font-size:12px;cursor:pointer}

    /* Alt sabit buton */
    .help-fab{position:fixed;right:16px;bottom:16px;z-index:50;display:flex;flex-direction:column;gap:8px;align-items:flex-end}
    .fab-btn{padding:12px 14px;border-radius:20px;border:none;background:linear-gradient(135deg,var(--ayda),var(--ayda-soft));color:#fff;
      box-shadow:0 12px 28px rgba(35,64,120,.35);cursor:pointer;font-weight:600;font-size:13px;display:flex;align-items:center;gap:8px}
    .fab-menu{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,.08);padding:8px;display:none}
    .fab-menu a{display:block;text-decoration:none;color:#0f172a;font-size:13px;padding:8px 10px;border-radius:10px}
    .fab-menu a:hover{background:#f3f4f6}

    @media (max-width:900px){
      .wrap{padding:18px 14px 14px;border-radius:20px}
      .gate{grid-template-columns:minmax(0,1fr)}
      .library-inner{grid-template-columns:minmax(0,1fr)}
    }
    @media (max-width:600px){
      header{flex-direction:column;align-items:flex-start}
      .viewer-header{flex-direction:column;align-items:flex-start}
      .iframe-shell{min-height:300px}
    }
  </style>
</head>
<body>

<div class="wrap">
  <header>
    <div class="brand">
      <div class="brand-logo">A</div>
      <div>
        <div class="brand-text-title">AYDA Â· Online KÃ¼tÃ¼phane</div>
        <div class="brand-text-sub">Seviyeye gÃ¶re Almanca materyaller ve tekrar videolarÄ±</div>
      </div>
    </div>
    <div class="pill"><span class="pill-dot"></span><span>Tek sayfadan tÃ¼m kaynaklar</span></div>
  </header>

  <!-- GiriÅŸ -->
  <section class="gate" id="gateSection">
    <div>
      <div class="gate-main-title">SÄ±nÄ±f kodunu gir, kÃ¼tÃ¼phaneye baÄŸlan</div>
      <div class="gate-main-sub">SeÃ§tiÄŸin sÄ±nÄ±f iÃ§in <strong>ders materyali, okumaâ€“dinlemeâ€“yazmaâ€“konuÅŸma</strong> Ã§alÄ±ÅŸmalarÄ±,
        <strong>sÄ±nav hazÄ±rlÄ±k</strong> ve <strong>ders tekrar videolarÄ±</strong> tek ekranda.</div>

      <form class="code-form" onsubmit="event.preventDefault(); unlockLibrary();">
        <div class="field">
          <div class="field-label">SÄ±nÄ±f kodu</div>
          <input id="classCodeInput" type="password" class="code-input" placeholder="Ã–rn: a1kasim2025" autocomplete="off"/>
        </div>
        <button type="submit" class="btn-primary"><span class="btn-icon">ğŸ”“</span><span>KÃ¼tÃ¼phaneye giriÅŸ yap</span></button>
      </form>

      <div class="gate-hint"><span class="gate-hint-badge">BÄ°LGÄ°</span><span>SÄ±nÄ±f kodun yoksa AYDA ekibine veya sÄ±nÄ±f Ã¶ÄŸretmenine yaz.</span></div>
      <div id="errorText" class="error-text hidden">Kod hatalÄ± gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen sÄ±nÄ±f Ã¶ÄŸretmeninden aldÄ±ÄŸÄ±n kodu tekrar kontrol et.</div>
    </div>

    <div class="gate-right">
      <div class="mini-row">
        <div>
          <div class="mini-label">Ã–rnek sÄ±nÄ±f kodu</div>
          <div class="mini-class">a1kasim2025</div>
        </div>
        <div class="chip"><span class="chip-dot"></span><span>Aktif dÃ¶nem</span></div>
      </div>
      <div class="mini-tags">
        <div class="chip">ğŸ“š Ders materyalleri</div>
        <div class="chip">ğŸ§ Dinleme &amp; konuÅŸma</div>
        <div class="chip">âœï¸ Yazma &amp; okuma</div>
        <div class="chip">ğŸ¯ SÄ±nav hazÄ±rlÄ±k</div>
      </div>
      <div class="mini-footer">GiriÅŸten sonra Ã¶nce <strong>seviye</strong>yi, sonra <strong>kategori</strong>leri seÃ§; saÄŸdaki listeden tÄ±kladÄ±ÄŸÄ±nda iÃ§erik aÅŸaÄŸÄ±daki pencerede aÃ§Ä±lÄ±r.</div>
    </div>
  </section>

  <!-- KÃ¼tÃ¼phane -->
  <section class="library" id="librarySection">
    <div class="library-inner">
      <!-- Sol panel -->
      <aside class="panel">
        <div class="panel-title">Seviye &amp; gÃ¶rÃ¼nÃ¼m</div>
        <div class="badge-row">
          <span class="badge-soft">AYDA Genel Almanca</span>
          <span class="badge-soft">TELC Â· Goethe Â· Ã–SD</span>
        </div>

        <div class="section-label">1 Â· Seviye seÃ§</div>
        <div class="btn-grid">
          <button class="tab-btn level-btn active" data-level="A1" onclick="selectLevel(event)"><span class="emoji">A1</span><span>BaÅŸlangÄ±Ã§</span></button>
          <button class="tab-btn level-btn" data-level="A2" onclick="selectLevel(event)"><span class="emoji">A2</span><span>Temel</span></button>
          <button class="tab-btn level-btn" data-level="B1" onclick="selectLevel(event)"><span class="emoji">B1</span><span>Orta</span></button>
          <button class="tab-btn level-btn" data-level="B2" onclick="selectLevel(event)"><span class="emoji">B2</span><span>Ãœst orta</span></button>
          <button class="tab-btn level-btn" data-level="SINAV" onclick="selectLevel(event)"><span class="emoji">ğŸ¯</span><span>SÄ±nav hazÄ±rlÄ±k</span></button>
        </div>

        <div class="section-label">2 Â· GÃ¶rÃ¼nÃ¼m</div>
        <div class="btn-grid">
          <button class="view-btn active" data-mode="kategori" onclick="selectViewMode(event)"><span class="emoji">ğŸ›ï¸</span><span>Kategori filtresi</span></button>
          <button class="view-btn" data-mode="liste" onclick="selectViewMode(event)"><span class="emoji">ğŸ“‹</span><span>Tam liste</span></button>
        </div>

        <!-- Filtre panelini aÃ§/kapa -->
        <div class="section-label">3 Â· Kategoriler</div>
        <button id="filterToggleBtn" class="ghost-btn" type="button" onclick="toggleFilterPanel()" aria-expanded="false">
          ğŸ” Kategorileri dÃ¼zenle
        </button>

        <!-- Collapsible filtre bÃ¶lÃ¼mÃ¼ -->
        <div id="filterSectionWrap" class="collapsible">
          <div class="collapsible-inner">
            <div id="filterSection">
              <div class="btn-grid" style="margin-top:8px">
                <button class="filter-chip" data-tag="ders" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ“š</span><span>Ders materyali</span></button>
                <button class="filter-chip" data-tag="video" onclick="toggleFilterTag(event)"><span class="emoji">â–¶ï¸</span><span>Ders videolarÄ± / tekrar</span></button>
                <button class="filter-chip" data-tag="ek" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ§©</span><span>Ek materyal</span></button>
                <button class="filter-chip" data-tag="konu" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ“Œ</span><span>Konu anlatÄ±m</span></button>
                <button class="filter-chip" data-tag="okuma" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ“–</span><span>Okuma / metin</span></button>
                <button class="filter-chip" data-tag="quizlet" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ”¤</span><span>Kelime &amp; Quizlet</span></button>
                <button class="filter-chip" data-tag="online" onclick="toggleFilterTag(event)"><span class="emoji">ğŸŒ</span><span>Online alÄ±ÅŸtÄ±rmalar</span></button>
                <button class="filter-chip" data-tag="dinleme" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ§</span><span>Dinleme yardÄ±mÄ±</span></button>
                <button class="filter-chip" data-tag="muzik" onclick="toggleFilterTag(event)"><span class="emoji">ğŸµ</span><span>MÃ¼zik playlist</span></button>
                <button class="filter-chip" data-tag="nicos" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ¬</span><span>Nicos Weg</span></button>
                <button class="filter-chip" data-tag="dergi" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ“°</span><span>Dergi &amp; gazete</span></button>
                <button class="filter-chip" data-tag="kitap" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ“˜</span><span>Kitap / PDF</span></button>
                <button class="filter-chip" data-tag="genel" onclick="toggleFilterTag(event)"><span class="emoji">â„¹ï¸</span><span>Genel bilgi</span></button>
                <button class="filter-chip" data-tag="sinav" onclick="toggleFilterTag(event)"><span class="emoji">ğŸ¯</span><span>SÄ±nav hazÄ±rlÄ±k</span></button>
              </div>

              <div class="filter-actions">
                <button class="btn-apply" type="button" onclick="applyFilters()">Uygula / Ara</button>
                <button class="btn-clear" type="button" onclick="clearFilters()">Temizle</button>
              </div>
            </div>
          </div>
        </div>

        <div class="panel-note">
          <strong>KullanÄ±m:</strong><br>
          1) Seviye (A1â€“B2 / SÄ±nav) â†’ 2) GÃ¶rÃ¼nÃ¼m â†’ 3) Kategorileri seÃ§ &amp; <strong>Uygula</strong>.<br>
          UyguladÄ±ktan sonra panel kapanÄ±r; tekrar aÃ§mak iÃ§in â€œKategorileri dÃ¼zenleâ€.
        </div>
      </aside>

      <!-- SaÄŸ panel -->
      <section class="panel viewer-panel">
        <div class="viewer-header">
          <div>
            <div class="viewer-title" id="viewerTitle">A1 Â· Kategori filtresi</div>
            <div class="viewer-meta" id="viewerMeta">A1 seviyesi iÃ§in tÃ¼m materyaller listeleniyor. Filtreleri kullanarak daraltabilirsin.</div>
          </div>
          <div class="viewer-status"><span class="viewer-status-dot"></span><span>KÃ¼tÃ¼phane aÃ§Ä±k</span></div>
        </div>

        <!-- Arama -->
        <div class="search-row">
          <span class="search-icon">ğŸ”</span>
          <input id="searchInput" class="search-input" type="search" placeholder="Kaynak ara (Ã¶rn: Quizlet, B1-B2 okuma, Nicos Weg, mÃ¼zik...)"/>
        </div>

        <!-- Son aÃ§Ä±lanlar -->
        <div class="recent-row hidden" id="recentRow">
          <div class="recent-title">Son aÃ§Ä±lanlar</div>
          <div class="recent-chips" id="recentChips"></div>
        </div>

        <div class="resource-chips" id="resourceChips"></div>

        <div class="iframe-shell">
          <iframe id="libraryFrame" src="" loading="lazy"></iframe>
          <div class="hint-overlay" id="hintOverlay">
            <div class="hint-box">
              <strong>Bu seviye iÃ§in henÃ¼z kaynak eklenmedi veya filtreler Ã§ok dar.</strong>
              <small>Filtreleri kaldÄ±rabilir veya farklÄ± bir seviye seÃ§ebilirsin. Yeni link eklemek iÃ§in JSâ€™teki <code>CONTENT</code> dizisine Ã¶ÄŸe eklemen yeterli.</small>
            </div>
          </div>
        </div>
      </section>
    </div>
  </section>
</div>

<!-- ALT SABÄ°T â€œMesaj Atâ€ -->
<div class="help-fab" id="helpFab" aria-live="polite">
  <div class="fab-menu" id="fabMenu" role="menu" aria-hidden="true">
    <a id="waLink" href="#" target="_blank" rel="noopener" role="menuitem">WhatsApp ile ilet</a>
    <a id="smsLink" href="#" role="menuitem">SMS ile ilet</a>
  </div>
  <button class="fab-btn" type="button" id="fabBtn">ğŸ“© AradÄ±ÄŸÄ±m kaynaÄŸÄ± bulamadÄ±m</button>
</div>

<script>
  // ==== ÅÄ°FRE (SÄ±nÄ±f kodu) ====
  const CLASS_CODE = "a1kasim2025";

  const LEVEL_LABELS = {A1:"A1",A2:"A2",B1:"B1",B2:"B2",SINAV:"SÄ±nav hazÄ±rlÄ±k"};

  // ==== TÃœM KAYNAKLAR ====
  const CONTENT = {
    A1:[
      {label:"A1 Ders Materyalleri (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1EhcIIju4RZyB5HfcccAF6q8nHIou2uwT#grid",tags:["ders"]},
      {label:"A1 Menschen Ders VideolarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1mv_Crm7n8s1javra-rW4a7fGz6PkFjQZ#grid",tags:["video"]},
      {label:"A1 Ek Materyal (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1vxr47d-wdfN6bBQfUJwKXvmv4luPiasq#grid",tags:["ek"]},
      {label:"A1 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1YolSViv4puykU6wfwTrQ2eswN9MhbCq8#grid",tags:["sinav","ek"]},
      {label:"Ders KayÄ±tlarÄ±nÄ± NasÄ±l Ä°zlerim & Materyalleri Nereden Ä°ndirebilirim? (YouTube)",url:"https://www.youtube.com/embed/cw9jcwIXv6g",tags:["genel","video"]},
      {label:"Arbeitsbuch Dinlemeleri NasÄ±l Ä°ndiririm? (YouTube)",url:"https://www.youtube.com/embed/SgLBimupSIU",tags:["dinleme","video"]},
      {label:"A1 CÃ¼mle KalÄ±plarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1VAz1AtWp4RDmmRddSZwqQr5XtfszjkOS#grid",tags:["ek","konu"]},
      {label:"YouTube Almanca MÃ¼zikler Playlist",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZGaC8tkVghThkGQ_L-QkYY0",tags:["muzik"]},
      {label:"Nicos Weg A1 (DW interaktif kurs)",url:"https://learngerman.dw.com/tr/nicos-weg/c-54846011",tags:["nicos","online"]},
      {label:"Quizlet Â· A1 Menschen Kelime AlÄ±ÅŸtÄ±rmalarÄ±",url:"https://quizlet.com/onurqlp/folders/menschen-a1?x=1xqt&i=3m8fpg",tags:["quizlet"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Genel",url:"https://www.hueber.de/menschen/lernen/uebungen",tags:["online"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Arbeitsbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=arbeitsbuch",tags:["online"]},
      {label:"A1 KÄ±sa Konu AnlatÄ±mlarÄ± Â· Ãœnite 1â€“3",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZFg8jGfuZqcMvQEPS6Dubaj",tags:["konu","video"]},
      {label:"A1 KÄ±sa Konu AnlatÄ±mlarÄ± Â· Ãœnite 3â€“9",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZFaNGGwJVk4Y2F4moEsCY76",tags:["konu","video"]},
      {label:"A1 KÄ±sa Konu AnlatÄ±mlarÄ± Â· Ãœnite 10â€“12",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZHrt1mHEz_heegM9KlCfeVw",tags:["konu","video"]},
      {label:"A1 KÄ±sa Konu AnlatÄ±mlarÄ± Â· Ãœnite 13â€“18",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZGZv5oqWOqn-MUNvMa6d_JQ",tags:["konu","video"]},
      {label:"A1 KÄ±sa Konu AnlatÄ±mlarÄ± Â· Ãœnite 18â€“24",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZHcKC5tsXwGulBB3SDj6bcp",tags:["konu","video"]}
    ],
    A2:[
      {label:"A2 Ders Materyalleri / YararlÄ± Materyaller (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1eRkHhSQ0cVnbMVOtvR-nDcOZRUFJOEKH#grid",tags:["ders","ek"]},
      {label:"A2 Menschen Ders VideolarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=10KGAPnOKlfd3trMtY4paFsJDCbGNok9k#grid",tags:["video"]},
      {label:"A2 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1zA2N_LlWTlHmUeEE1uay1pORqTvQBbSm#grid",tags:["sinav","ek"]},
      {label:"Arbeitsbuch Dinlemeleri NasÄ±l Ä°ndiririm? (YouTube)",url:"https://www.youtube.com/embed/GHf6eOr6MU0",tags:["dinleme","video"]},
      {label:"A2 KonuÅŸma KalÄ±plarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1v1KnsUELnxaqwKEhN_8ruqGDOkHbrYFG#grid",tags:["konu","ek"]},
      {label:"A2 Konu AnlatÄ±m VideolarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1dkvJRQmwMAy4-xima2GhujCnFhRwq63B#grid",tags:["konu","video"]},
      {label:"YouTube Almanca MÃ¼zikler Playlist",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZGaC8tkVghThkGQ_L-QkYY0",tags:["muzik"]},
      {label:"Quizlet Â· A2 Menschen Kelime AlÄ±ÅŸtÄ±rmalarÄ±",url:"https://quizlet.com/Saalihyilmazz/folders/menschen-a2?i=195vch&x=1xqY",tags:["quizlet"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Kursbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=kursbuch",tags:["online"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Arbeitsbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=arbeitsbuch",tags:["online"]}
    ],
    B1:[
      {label:"B1 Ders DosyalarÄ± (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1-4HicuJ5pDdyZim4mT_2ougN2v-vEwPD#grid",tags:["ders"]},
      {label:"B1 YararlÄ± Videolar ve Materyaller (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1AnFbEW5pq2G6_7y2tA1-EReVj_LBibTm#grid",tags:["ek","video"]},
      {label:"B1 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1fJ10MSgOCluvbN7GQVTn7hU-WHbRZoDB#grid",tags:["sinav","ek"]},
      {label:"B1 Bilgilendirme DokÃ¼manÄ± (Google Docs)",url:"https://docs.google.com/document/d/1__fPtBM9tD_eNiaz88XTlO1VS-6P3ophA3x4FJyirXE/preview",tags:["genel","ders"]},
      {label:"Almanca Dergi & Gazete (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1fvIHKArOr8QCOryBSK7-BdXNZmb04XNU#grid",tags:["okuma","dergi"]},
      {label:"B1â€“B2 Okuma Metinleri (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1Db5TITLZrBDc01FptVUm0_VoLDdSVG3x#grid",tags:["okuma"]},
      {label:"Arbeitsbuch Dinlemeleri NasÄ±l Ä°ndiririm? (YouTube)",url:"https://www.youtube.com/embed/GHf6eOr6MU0",tags:["dinleme","video"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Kursbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=kursbuch",tags:["online"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Arbeitsbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=arbeitsbuch",tags:["online"]},
      {label:"Kitap Â· B1/B2 (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1nwBOKfm6XL5TQZKNpQTonkJ21Qe5oF-w#grid",tags:["kitap","ders"]},
      {label:"YouTube Almanca MÃ¼zikler Playlist",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZGaC8tkVghThkGQ_L-QkYY0",tags:["muzik"]}
    ],
    B2:[
      {label:"Kitap Â· B1/B2 (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1nwBOKfm6XL5TQZKNpQTonkJ21Qe5oF-w#grid",tags:["kitap","ders"]},
      {label:"B2 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1cQSd1Jjo8hvFhVHCJrwdzE8JMwMJnQZ9#grid",tags:["sinav","ek","online"]},
      {label:"B1â€“B2 Okuma Metinleri (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1Db5TITLZrBDc01FptVUm0_VoLDdSVG3x#grid",tags:["okuma"]},
      {label:"Almanca Dergi & Gazete (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1fvIHKArOr8QCOryBSK7-BdXNZmb04XNU#grid",tags:["okuma","dergi"]},
      {label:"B1â€“B2 YararlÄ± Videolar ve Materyaller (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1AnFbEW5pq2G6_7y2tA1-EReVj_LBibTm#grid",tags:["ek","video"]},
      {label:"B2 YouTube Playlist (Kurs/Konu TekrarlarÄ±)",url:"https://www.youtube.com/embed/videoseries?list=PLk1fjOl39-51lvdiuQYsLW-0aGIdNNknA",tags:["video","konu"]},
      {label:"Arbeitsbuch Dinlemeleri NasÄ±l Ä°ndiririm? (YouTube)",url:"https://www.youtube.com/embed/GHf6eOr6MU0",tags:["dinleme","video"]},
      {label:"YouTube Almanca MÃ¼zikler Playlist",url:"https://www.youtube.com/embed/videoseries?list=PLlPnminIi7ZGaC8tkVghThkGQ_L-QkYY0",tags:["muzik"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Kursbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=kursbuch",tags:["online"]},
      {label:"Menschen Online AlÄ±ÅŸtÄ±rmalar Â· Arbeitsbuch",url:"https://www.hueber.de/menschen/lernen/uebungen?bestandteil=arbeitsbuch",tags:["online"]}
    ],
    SINAV:[
      {label:"A1 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1YolSViv4puykU6wfwTrQ2eswN9MhbCq8#grid",tags:["sinav","A1","ek"]},
      {label:"A2 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1zA2N_LlWTlHmUeEE1uay1pORqTvQBbSm#grid",tags:["sinav","A2","ek"]},
      {label:"B1 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1fJ10MSgOCluvbN7GQVTn7hU-WHbRZoDB#grid",tags:["sinav","B1","ek"]},
      {label:"B2 SÄ±nav HazÄ±rlÄ±k (Drive klasÃ¶rÃ¼)",url:"https://drive.google.com/embeddedfolderview?id=1cQSd1Jjo8hvFhVHCJrwdzE8JMwMJnQZ9#grid",tags:["sinav","B2","ek","online"]}
    ]
  };

  // Elemanlar
  const gateSection = document.getElementById("gateSection");
  const librarySection = document.getElementById("librarySection");
  const errorText = document.getElementById("errorText");
  const classCodeInput = document.getElementById("classCodeInput");
  const viewerTitle = document.getElementById("viewerTitle");
  const viewerMeta = document.getElementById("viewerMeta");
  const libraryFrame = document.getElementById("libraryFrame");
  const hintOverlay = document.getElementById("hintOverlay");
  const resourceChips = document.getElementById("resourceChips");
  const searchInput = document.getElementById("searchInput");
  const recentRow = document.getElementById("recentRow");
  const recentChips = document.getElementById("recentChips");
  const filterWrap = document.getElementById("filterSectionWrap");
  const filterToggleBtn = document.getElementById("filterToggleBtn");

  let currentLevel="A1";
  let viewMode="kategori";
  let activeTags=new Set();
  let searchQuery="";
  let recentResources=[];

  // ====== GiriÅŸ ======
  function unlockLibrary(){
    const value=(classCodeInput.value||"").trim();
    if(!value){showError("LÃ¼tfen sÄ±nÄ±f kodunu gir.");return;}
    if(value.toLowerCase()!==CLASS_CODE.toLowerCase()){showError("Kod hatalÄ± gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen sÄ±nÄ±f Ã¶ÄŸretmeninden aldÄ±ÄŸÄ±n kodu tekrar kontrol et.");return;}

    errorText.classList.add("hidden");
    gateSection.classList.add("hidden");
    librarySection.style.display="block";

    currentLevel="A1";viewMode="kategori";activeTags=new Set();searchQuery="";recentResources=[];searchInput.value="";
    document.querySelectorAll(".level-btn").forEach(btn=>btn.classList.toggle("active",btn.getAttribute("data-level")===currentLevel));
    document.querySelectorAll(".view-btn").forEach(btn=>btn.classList.toggle("active",btn.getAttribute("data-mode")===viewMode));
    document.querySelectorAll(".filter-chip").forEach(btn=>btn.classList.remove("active"));

    const startClosed = window.innerWidth <= 900;
    setFilterOpen(!startClosed);
    renderRecent();
    refreshViewer();

    classCodeInput.value="";
  }

  function showError(message){errorText.textContent=message;errorText.classList.remove("hidden");}

  // ====== Filtre paneli aÃ§/kapa ======
  function setFilterOpen(isOpen){
    filterWrap.classList.toggle("open",isOpen);
    filterToggleBtn.setAttribute("aria-expanded",String(isOpen));
    const count=activeTags.size;
    filterToggleBtn.textContent = count>0
      ? `ğŸ” Kategorileri dÃ¼zenle (${count} seÃ§ili)`
      : "ğŸ” Kategorileri dÃ¼zenle";
  }
  function toggleFilterPanel(){setFilterOpen(!filterWrap.classList.contains("open"));}

  // ====== SeÃ§imler ======
  function selectLevel(event){
    event.preventDefault();
    const btn=event.currentTarget;
    currentLevel=btn.getAttribute("data-level");
    document.querySelectorAll(".level-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    refreshViewer();
  }

  function selectViewMode(event){
    event.preventDefault();
    const btn=event.currentTarget;
    viewMode=btn.getAttribute("data-mode");
    document.querySelectorAll(".view-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    if(viewMode==="liste"){setFilterOpen(false);}
    refreshViewer();
  }

  function toggleFilterTag(event){
    event.preventDefault();
    const btn=event.currentTarget;
    const tag=btn.getAttribute("data-tag");
    if(activeTags.has(tag)){activeTags.delete(tag);btn.classList.remove("active");}
    else{activeTags.add(tag);btn.classList.add("active");}
    setFilterOpen(true);
  }

  function applyFilters(){
    refreshViewer();
    setFilterOpen(false);
  }

  function clearFilters(){
    activeTags.clear();
    document.querySelectorAll(".filter-chip").forEach(btn=>btn.classList.remove("active"));
    searchQuery=""; if(searchInput) searchInput.value="";
    refreshViewer();
    setFilterOpen(true);
  }

  // ====== Listeleme ======
  function getVisibleResources(){
    const list=CONTENT[currentLevel]||[];
    if(!list.length) return [];
    let filtered=list;

    if(viewMode==="kategori" && activeTags.size>0){
      filtered=filtered.filter(item => (item.tags||[]).some(t=>activeTags.has(t)));
    }
    if(searchQuery){
      const q=searchQuery.toLowerCase();
      filtered=filtered.filter(item => (item.label||"").toLowerCase().includes(q));
    }
    return filtered;
  }

  function refreshViewer(){
    const resources=getVisibleResources();
    const levelLabel=LEVEL_LABELS[currentLevel]||currentLevel;
    const modeText=viewMode==="liste"?"TÃ¼m kaynak listesi":"Kategori filtresi";
    viewerTitle.textContent=levelLabel+" Â· "+modeText;

    if((CONTENT[currentLevel]||[]).length===0){
      viewerMeta.textContent="Bu seviye iÃ§in henÃ¼z kaynak eklenmedi.";
    }else if(!resources.length && (activeTags.size>0||searchQuery)){
      viewerMeta.textContent="Bu seviye, seÃ§tiÄŸin filtreler veya arama sonucuna gÃ¶re kaynak bulunamadÄ±.";
    }else{
      viewerMeta.textContent=resources.length+" kaynak listelendi. AÅŸaÄŸÄ±daki butonlardan birine tÄ±kladÄ±ÄŸÄ±nda, iÃ§erik iframeâ€™de aÃ§Ä±lÄ±r.";
    }

    if(!resources.length){
      resourceChips.innerHTML="";libraryFrame.src="about:blank";hintOverlay.classList.remove("hidden");return;
    }
    renderResourceChips(resources);
    libraryFrame.src=resources[0].url;
    hintOverlay.classList.add("hidden");
  }

  function renderResourceChips(resources){
    resourceChips.innerHTML="";
    resources.forEach((res,index)=>{
      const btn=document.createElement("button");
      btn.type="button";
      btn.className="resource-chip"+(index===0?" active":"");
      btn.textContent=res.label;
      btn.addEventListener("click",function(){
        document.querySelectorAll(".resource-chip").forEach(c=>c.classList.remove("active"));
        btn.classList.add("active");
        libraryFrame.src=res.url;
        registerRecent(res);
      });
      resourceChips.appendChild(btn);
    });
  }

  // ====== Son aÃ§Ä±lanlar ======
  function registerRecent(resource){
    const key=currentLevel+" Â· "+(resource.label||"");
    const existingIndex=recentResources.findIndex(r=>r.key===key);
    if(existingIndex!==-1){recentResources.splice(existingIndex,1);}
    recentResources.unshift({key,level:currentLevel,label:resource.label,url:resource.url});
    if(recentResources.length>5){recentResources.pop();}
    renderRecent();
  }

  function renderRecent(){
    if(!recentResources.length){recentRow.classList.add("hidden");recentChips.innerHTML="";return;}
    recentRow.classList.remove("hidden");recentChips.innerHTML="";
    recentResources.forEach(item=>{
      const btn=document.createElement("button");
      btn.type="button";btn.className="recent-chip";btn.textContent=item.key;btn.title=item.label;
      btn.addEventListener("click",function(){
        currentLevel=item.level;
        document.querySelectorAll(".level-btn").forEach(b=>b.classList.toggle("active",b.getAttribute("data-level")===currentLevel));
        libraryFrame.src=item.url;hintOverlay.classList.add("hidden");
      });
      recentChips.appendChild(btn);
    });
  }

  // Arama
  if(searchInput){
    searchInput.addEventListener("input",function(){
      searchQuery=(this.value||"").toLowerCase().trim();
      refreshViewer();
    },{passive:true});
  }

  classCodeInput.addEventListener("keydown",function(e){
    if(e.key==="Enter"){e.preventDefault();unlockLibrary();}
  });

  // ====== FAB: Mesaj At (WhatsApp & SMS) ======
  const fabBtn=document.getElementById("fabBtn");
  const fabMenu=document.getElementById("fabMenu");
  const waText=encodeURIComponent("AradÄ±ÄŸÄ±m kaynaÄŸÄ± bulamadÄ±m");
  const waNumber="905409122503"; // +90 540 912 25 03
  const waHref=`https://wa.me/${waNumber}?text=${waText}`;
  const smsHref=`sms:+${waNumber}?&body=${waText}`;
  document.getElementById("waLink").setAttribute("href",waHref);
  document.getElementById("smsLink").setAttribute("href",smsHref);

  fabBtn.addEventListener("click",()=>{
    const open=fabMenu.style.display==="block";
    fabMenu.style.display=open?"none":"block";
  });

  document.addEventListener("click",(e)=>{
    if(!document.getElementById("helpFab").contains(e.target)){
      fabMenu.style.display="none";
    }
  });

  setFilterOpen(false);
</script>

</body>
</html>
